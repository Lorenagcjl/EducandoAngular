<div class="container-fluid">
  <div class="row">
    <!-- Lista de usuarios -->
    <div class="col-md-4">
      <app-chat-lista-usuarios (usuarioSeleccionado)="seleccionarUsuario($event)"></app-chat-lista-usuarios>

      <!-- Chats recientes -->
<div class="card mt-4 shadow-sm">
  <div class="card-header bg-light text-dark" 
       style="cursor: pointer;" 
       (click)="toggleChatsRecientes()">
    <strong>
      Chats recientes
      <i 
        class="fas"
        [ngClass]="{'fa-chevron-down': mostrarChatsRecientes, 'fa-chevron-right': !mostrarChatsRecientes}"
        style="float: right; margin-top: 3px;">
      </i>
    </strong>
  </div>

  <ul class="list-group list-group-flush collapsible" [class.collapsed]="!mostrarChatsRecientes">
  <li 
    *ngFor="let chat of chatsRecientes"
    (click)="abrirChat(chat)"
    class="list-group-item list-group-item-action d-flex align-items-center"
    [class.active]="chat.idUsuario === usuarioSeleccionado?.idUsuario"
    style="cursor: pointer;"
  >
    <img *ngIf="chat.foto" [src]="chat.foto" class="rounded-circle me-2" width="40" height="40" [alt]="chat.nombres" />
    <span>{{ chat.nombres }} {{chat.apellidos}}</span>
  </li>
</ul>

</div>


    </div>

    <!-- Panel de mensajes -->
    <div class="col-md-8">
      <ng-container *ngIf="usuarioSeleccionado; else sinChat">
        <app-chat-mensajes [usuario]="usuarioSeleccionado"></app-chat-mensajes>
      </ng-container>

      <ng-template #sinChat>
        <div class="card mt-4 shadow-sm text-center p-5">
          <h5 class="text-muted">Selecciona una conversaci√≥n para comenzar</h5>
          <i class="fas fa-comments fa-3x text-secondary mt-3"></i>
        </div>
      </ng-template>
    </div>
  </div>
</div>
